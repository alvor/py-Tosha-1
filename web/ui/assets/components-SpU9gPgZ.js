import{r as w,d as j,a as R,c,o,F as T,b as O,e as N,n as k,w as I,f as e,g as A,h as F,i as _,j as X,k as M,T as V,u as $,v as Q,t as m,K as te,l as le,m as se,p as L,q as z,s as U,x as W,y as ae}from"./vendor-gI5G1btb.js";import{u as Z,a as ne}from"./router-EMcaJiT1.js";const oe="/py-tosha-a.svg",Y="/py-Tosha.svg",ee="/ios_spin.svg",C=w("http://192.168.1.108/"),y=w({}),ie={class:"nav d-md2-none"},ce=["src"],re={key:1,class:"space"},ue=j({__name:"Nav_Bar",setup(x){const a=[{img:"/net_wifi.svg",to:"/network",label:"network"},{img:"/folder_files.svg",to:"/files",label:"files"},{img:"/info.svg",to:"/info",label:"info"},{img:"/switches.svg",to:"/switches",label:"switch"},{img:"/schedule.svg",to:"/cron_scheduler",label:"scheduler"},{img:"",to:"",label:""},{img:"/settings.svg",to:"/settings",label:"settings"}];return(r,n)=>{const u=R("router-link");return o(),c("nav",ie,[(o(),c(T,null,O(a,d=>(o(),c(T,null,[d.label?(o(),N(u,{key:0,class:k(["btn my-2 _mx-auto",{hilith:r.$route.path==d.to}]),title:d.label,to:d.to},{default:I(()=>[e("img",{src:d.img},null,8,ce)]),_:2},1032,["title","class","to"])):(o(),c("div",re))],64))),64))])}}}),B=(x,a)=>{const r=x.__vccOpts||x;for(const[n,u]of a)r[n]=u;return r},de=B(ue,[["__scopeId","data-v-3f06bd17"]]),_e={class:"layout"},ve={key:"1",src:oe,class:"ma-1",alt:"py-Tosha logo"},fe={key:"2",src:Y,class:"ma-1",alt:"py-Tosha logo"},pe={key:"2",src:Y,class:"ma-1",alt:"py-Tosha logo"},me={key:"2",src:ee,class:"ma-1",alt:"py-Tosha logo"},he={style:{position:"relative"}},ge={style:{"_padding-left":"50px"}},be=j({__name:"LayoutDefault",setup(x){let a=w(!0);const r=Z();let n=w(!1);setTimeout(()=>n.value=!0,2222);const u=A(()=>{var l;return((l=y.value)==null?void 0:l.datetime)&&new Date(y.value.datetime).toISOString().slice(8,16).replace("T"," ")});let d=null;return F(()=>r.name,()=>{clearTimeout(d),d=setTimeout(()=>a.value=!1,7e3),!a.value&&setTimeout(()=>a.value=!0,400)}),(l,i)=>{const h=R("router-link"),g=R("router-view");return o(),c("div",_e,[e("header",null,[_(h,{to:"/",_target:"_blank",class:k(["logo",{home:l.$route.name!="home"}])},{default:I(()=>[_(V,{name:"fade"},{default:I(()=>[$(a)?(o(),c("img",ve)):(o(),c("img",fe))]),_:1}),$(n)?X((o(),c("img",pe,null,512)),[[Q,!1]]):M("",!0)]),_:1},8,["class"]),$(n)?X((o(),c("img",me,null,512)),[[Q,!1]]):M("",!0),e("div",he,[_(V,{name:"blurslide",appear:""},{default:I(()=>[(o(),c("h2",{class:"title text-h2",key:l.$route.meta.label||"py-Tosha"},m(l.$route.meta.label||"py-Tosha"),1))]),_:1})])]),e("main",ge,[_(de),_(g,{class:"view"},{default:I(({Component:t})=>[_(V,{name:"pagefade","_before-enter":"over_hide=true",_enter:"onEnter","_after-enter":"over_hide=false","_enter-cancelled":"over_hide=false"},{default:I(()=>[(o(),N(te,{max:"3",key:$(C)},[(o(),N(le(t),{class:"viewG"}))],1024))]),_:2},1024)]),_:1})]),e("footer",null,[e("ul",null,[e("li",{class:k({"bg-warn":$(y).err})},m(u.value),3),e("li",{class:k({"bg-warn":$(y).err})},"mem: "+m(~~($(y).mem_free/100)/10)+"k",3),e("li",{class:k({"bg-warn":$(y).err})},"cpu: "+m(~~($(y).load*100+1))+"%",3)])])])}}}),zt=B(be,[["__scopeId","data-v-f042f74a"]]),ye={key:0,src:ee},$e={key:1,class:"mx-2"},we=j({__name:"ZButton",props:{to:{type:[Object,String],required:!1},label:{},ladge:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(x){return(a,r)=>{const n=R("router-link");return x.to?(o(),N(n,{key:0,class:k(["btn my-2 gggg _mx-auto",{ladge:x.ladge}]),to:x.to},{default:I(()=>[L(m(x.label),1)]),_:1},8,["class","to"])):(o(),c("a",{key:1,class:k(["btn my-2 _mx-auto",{ladge:x.ladge}]),_to:"to"},[se(a.$slots,"prepend",{},void 0),x.loading?(o(),c("img",ye)):(o(),c("span",$e,m(x.label),1))],2))}}}),p=B(we,[["__scopeId","data-v-c810bab2"]]),ke={class:"wrapper"},xe={class:"d-flex_"},Ce=j({__name:"home",setup(x){return(a,r)=>(o(),c("div",ke,[e("div",xe,[e("div",null,[_(p,{ladge:"",to:"/network",label:"network"})]),e("div",null,[_(p,{ladge:"",to:"/files",label:"files"})]),e("div",null,[_(p,{ladge:"",to:"/info",label:"info"})]),e("div",null,[_(p,{ladge:"",to:"/switches",label:"switches"})]),e("div",null,[_(p,{ladge:"",to:"/cron_scheduler",label:"scheduler"})]),e("div",null,[_(p,{ladge:"",to:"/servers_api",label:"servers-api list"})]),e("div",null,[_(p,{ladge:"",to:"/settings",label:"settings"})])])]))}}),Se=B(Ce,[["__scopeId","data-v-bf22e83e"]]),Bt=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),Te={class:"row pa-2"},je={class:"row pa-2"},Oe={class:"col-md-12 _col-4 px-2 text-b"},Pe={class:"col-md-12 col-8 px-2"},Ie={key:0,style:{"justify-items":"left"}},Le={class:"txt-left"},De={key:1},Ne={class:"txt-left"},ze={class:"txt-primary"},Be=j({__name:"info",setup(x){const a=w(null);let r=null;function n(){fetch(`${C.value}api/status`).then(async l=>{if(l.ok){const i=await l.json();a.value=i}else a.value=[]}).catch(l=>a.value=[])}const u=A(()=>{var l;return((l=y.value)==null?void 0:l.datetime)&&new Date(y.value.datetime).toISOString().slice(8,16).replace("T"," ")});function d(){n()}return z(()=>{r=!0,n()}),U(()=>{r=!1}),F(()=>y.value.err,l=>{!l&&r&&n()}),(l,i)=>(o(),c("div",null,[i[1]||(i[1]=e("h3",null,"Информация",-1)),_(p,{onClick:i[0]||(i[0]=h=>l.$router.go(-1)),label:"<<",class:"mx-2"}),_(p,{onClick:d,label:"refresh"}),e("div",Te,[e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])}," PLC time: "+m(u.value),3),e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])},"Free mem: "+m(~~($(y).mem_free/100)/10)+"k",3),e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])},"UpTime: "+m(~~($(y).uptime/60))+"min",3),e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])},"CPU load: "+m(~~($(y).load*100+1))+"%",3)]),(o(!0),c(T,null,O(a.value,(h,g)=>(o(),c("div",je,[e("div",Oe,m(h.name),1),e("div",Pe,[Array.isArray(h.state)?(o(),c("div",Ie,[(o(!0),c(T,null,O(h.state,t=>(o(),c("div",Le,m(t),1))),256))])):(o(),c("div",De,[(o(!0),c(T,null,O(h.state,(t,s)=>(o(),c("div",Ne,[e("b",ze,m(s),1),L("="+m(t),1)]))),256)),L(" "+m(h.state),1)]))])]))),256))]))}}),Mt=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"})),Me={class:"row px-2"},Ee={class:"list_files col-8 col-sm-12"},Ue={class:"col-12 ma-2"},Je={class:"ant mx-2"},Re=["onClick"],Ae=j({__name:"network",setup(x){const a=w([]),r=w(""),n=w(!1);let u=0,d;function l(){n.value||(n.value=!0,fetch(`${C.value}api/net/scan`).then(async t=>{if(t.ok){const s=await t.json();r.value=s.connected,a.value=a.value.filter(b=>!s.available.find(P=>b[1]==P[1])&&b[6]+6>~~(Date.now()/1e3/60)),a.value.push(...s.available.map(b=>(b[0]=b[0]||b[1],b[6]=~~(Date.now()/1e3/60),b))),a.value=a.value.sort((b,P)=>b[3]>P[3]?-1:b[3]<P[3]?1:0)}}).finally(()=>{n.value=!1,!(u>3)&&(u++,d=setTimeout(l,(.5+u/3)*60*1e3))}))}function i(){if(!n.value&&confirm("Подтвердите действие - забыть сеть")){n.value=!0;const t={method:"delete"};fetch(`${C.value}api/net/config`,t).then(async s=>{s.ok&&(r.value="")}).finally(()=>{n.value=!1})}}function h(t){if(n.value)return;const s=prompt(`Введите ключ подключения к сетти ${t}`,"");if(s){n.value=!0;const b={method:"post",body:JSON.stringify({ssid:t,pswd:s})};fetch(`${C.value}api/net/config`,b).then(async P=>{P.ok}).finally(()=>{n.value=!1,l()})}}z(()=>{l()}),U(()=>{clearTimeout(d)});function g(t){return(t+99)*1.8}return(t,s)=>(o(),c("div",null,[_(p,{onClick:s[0]||(s[0]=b=>t.$router.go(-1)),label:"<<"}),s[3]||(s[3]=e("h2",{class:"ma-2"}," Network connection",-1)),e("div",Me,[s[2]||(s[2]=e("div",{class:"list_files_ col-4 col-sm-12 justify-cc",style:{"padding-top":"8px"}}," Список доступных сетей: ",-1)),e("div",Ee,[_(p,{onClick:s[1]||(s[1]=b=>{W(u)?u.value=1:u=1,l()}),label:"scan",loading:n.value,style:{width:"90px"}},null,8,["loading"]),(o(!0),c(T,null,O(a.value,b=>(o(),c("div",Ue,[e("div",null,m(r.value==b[0]?"*":"")+" "+m(b[0]),1),e("div",Je,[e("div",{class:"progress",style:ae(`height:${g(b[3])}% ; width:${g(b[3])}% `)},null,4)]),e("div",null,[r.value==b[0]?(o(),c("a",{key:0,class:"cursor-p",onClick:i}," забыть ")):(o(),c("a",{key:1,class:"cursor-p",onClick:P=>h(b[0])}," подключить ",8,Re))])]))),256))])])]))}}),Fe=B(Ae,[["__scopeId","data-v-3cf940e9"]]),Et=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"})),Ke={class:"row px-2",style:{"min-height":"5px"}},Ve={class:"list_files row"},Ze={class:"col-4 col-md-6 col-sm-12 align-ic px-2"},qe=["onClick"],Ge={class:"row pa-2",style:{"white-space":"break-spaces"}},He={class:"col-3 col-md-4 col-sm-6"},Xe={class:"text-b"},Qe={class:"col-3 col-md-4 col-sm-6"},We={class:"text-b"},Ye={class:"col-3 col-md-4 col-sm-6"},et={class:"text-b"},tt=j({__name:"files",setup(x){const a=w([]),r=w({used:null,free:null,total:null}),n=w(null),u=ne(),d=w(!1);function l(g=""){d.value=!0,fetch(`${C.value}api/ls/${g}`).then(async t=>{if(t.ok){const s=await t.json();if(!s)return;a.value=s.files,r.value.free=s.free,r.value.total=s.total,r.value.used=s.used,n.value=s.currdir}}).finally(()=>d.value=!1)}function i(g=""){confirm("Готовы удалить этот файл или папку?")&&fetch(`${C.value}api/delete/${g}`,{method:"delete"}).then(async t=>{t.ok?l():alert("Ошибка, что-то пошло не так...")}).catch(t=>alert("Ошибка, что-то пошло не так..."))}function h(g,t){t===16384&&l(`?chdir=${g}`),t===32768&&u.push({name:"show_content",query:{file_name:g}})}return z(()=>{setTimeout(()=>{l()},9)}),(g,t)=>(o(),c("div",null,[a.value.find(s=>s[0]=="/")?(o(),N(p,{key:0,onClick:t[0]||(t[0]=s=>h("/",16384)),label:"/",class:"mx-2"})):M("",!0),a.value.find(s=>s[0]=="..")?(o(),N(p,{key:1,onClick:t[1]||(t[1]=s=>h("..",16384)),label:"<<",class:"mx-2"})):M("",!0),_(p,{onClick:t[2]||(t[2]=s=>l()),label:"refresh",class:"mx-2"}),_(p,{_click:"set_params(r)",label:"upload",class:"mx-2"}),e("h3",null,"Current dir: "+m(n.value),1),e("div",Ke,[e("div",{v_if:"loading",class:k(["loader",{loading:d.value}])},null,2)]),e("div",Ve,[(o(!0),c(T,null,O(a.value,s=>(o(),c("div",Ze,[e("span",{class:k(["file_nm",{folder:s[1]==16384}]),onClick:b=>h(s[0],s[1])},m(s[0]),11,qe),e("span",null,[_(p,{_click:"scan",onClick:b=>i(s[0]),label:"x"},null,8,["onClick"])])]))),256))]),e("div",Ge,[e("div",He,[t[3]||(t[3]=L(" total: ")),e("span",Xe,m(~~(r.value.total/100)/10)+" K",1)]),e("div",Qe,[t[4]||(t[4]=L(" free: ")),e("span",We,m(~~(r.value.free/100)/10)+" K",1)]),e("div",Ye,[t[5]||(t[5]=L(" used: ")),e("span",et,m(~~(r.value.used/100)/10)+" K",1)])])]))}}),lt=B(tt,[["__scopeId","data-v-97243bc8"]]),Ut=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"})),st={style:{position:"sticky",top:"0",left:"0","max-width":"inherit"}},at={class:"row px-2",style:{"min-height":"5px"}},nt={class:"list_files row px-2",style:{"_max-width":"inherit"}},ot=["contenteditable","textContent"],it=j({__name:"show_content",setup(x){const a=w(null),r=Z();let n=null;const u=w(!1);let d=w(!1);const l=w([]);function i(){u.value=!0,fetch(`${C.value}show_content/?file_name=${n}`).then(async t=>{if(t.ok){d.value=!1;const s=await t.text();a.value=s,l.value=s.split(`
`),h.value=!1}}).finally(t=>u.value=!1)}z(()=>{if(n===r.query.file_name)return;a.value=null,n=r.query.file_name,setTimeout(()=>{i()},9);const t=document.querySelector("#f_content");t.oninput=()=>h.value=!0});const h=w(!1);function g(t){const s=new FormData,b=document.querySelector("#f_content");let K=new URLSearchParams(document.location.search).get("file_name");const J=b.textContent;let v=new Blob([J],{type:"text/plain"});s.append("files",v);const f=new XMLHttpRequest;f.open("PUT",`${C.value}api/upload/${K}`,!0),f.addEventListener("load",()=>{u.value=!1,h.value=!1}),f.onreadystatechange=function(){f.readyState==4&&i()},f.addEventListener("error",()=>{u.value=!1,alert("Upload Error!")}),u.value=!0,f.send(J)}return(t,s)=>(o(),c("div",null,[e("div",st,[_(p,{onClick:s[0]||(s[0]=b=>t.$router.go(-1)),label:"<<",class:"mx-2"}),_(p,{onClick:s[1]||(s[1]=b=>i()),label:"refresh",class:"mx-2"}),_(p,{onClick:s[2]||(s[2]=b=>W(d)?d.value=!$(d):d=!$(d)),label:"edit",class:"mx-2"}),$(d)||h.value?(o(),N(p,{key:0,class:"mx-2 bg-warn",onClick:g,label:"save"})):M("",!0)]),e("h3",null,m(t.$route.query.file_name),1),e("div",at,[e("div",{v_show:"loading",class:k(["loader",{loading:u.value}])},null,2)]),e("div",nt,[e("pre",{v_if:"!edit_mode",contenteditable:$(d),id:"f_content",style:{"white-space":"pre-wrap","background-color":"#eeeeee",padding:"2px"},textContent:m(a.value),_input:"file_content = $event.target.innerText ",onBlur:s[3]||(s[3]=b=>a.value=b.target.innerText)},null,40,ot),M("",!0)])]))}}),ct=B(it,[["__scopeId","data-v-fd44aa78"]]),Jt=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"})),rt={class:"row px-2"},ut={class:"col-6 col-md-12 px-2 _text-b align-ic"},dt={class:"mx-2"},_t=j({__name:"switches",setup(x){const a=w(null);let r,n=0;function u(){r&&r.close(),r=new EventSource(`${C.value}api/switches/ls/?check_id=${n}`,{__withCredentials:!0,__heartbeatTimeout:12e4}),r.onmessage=l=>{try{const i=JSON.parse(l.data);n=l.lastEventId,a.value=i}catch(i){console.warn("evtSource_message_22: ",l.data.slice(0,4),l.data,i)}}}function d(l){const i={method:"put",body:JSON.stringify([{id:l.id,value:l.value}])};fetch(`${C.value}api/switches/set`,i).then(async h=>{h.ok})}return z(()=>{u()}),U(()=>{r&&r.close()}),(l,i)=>{var h,g;return o(),c("div",null,[_(p,{onClick:i[0]||(i[0]=t=>l.$router.go(-1)),label:"<<",class:"mx-2"}),i[1]||(i[1]=e("h3",null,"Switch view block ",-1)),e("div",rt,[(o(!0),c(T,null,O((h=a.value)==null?void 0:h.data,t=>(o(),c("div",ut,[_(p,{onClick:s=>{t.value=!t.value,d(t)},ladge:"",label:(t==null?void 0:t.name)||"switch"},{prepend:I(()=>[e("div",{class:k(["lamp",{on:t.value===1,off:t.value===0}]),_label:"switch"},null,2)]),_:2},1032,["onClick","label"]),e("div",{class:k(["lamp",{on:t.value===1,off:t.value===0}]),_label:"switch"},null,2),e("span",dt,m(t.id)+" = "+m(t.value),1)]))),256))]),L(" tt: "+m((g=a.value)==null?void 0:g.time),1)])}}}),Rt=Object.freeze(Object.defineProperty({__proto__:null,default:_t},Symbol.toStringTag,{value:"Module"})),vt={class:"row pa-2"},ft={class:"row pa-md-2"},pt={class:"col-md-12 _col-4 px-2 text-b"},mt={class:"col-md-12 _col-8 _px-2"},ht={class:"row pa-md-2"},gt={class:"col-md-12 _col-6 _pa-md-2",style:{"flex-grow":"1"}},bt={class:"col-12 pa-2",v__for:"(r,i) in cron_list?.tasks",__style:"width: 650px;",style:{overflow:"auto","_max-width":"calc(100vw - 30px)"}},yt={class:"px-2"},$t={class:"col-md-12 _col-6 px-2",style:{"flex-grow":"1"}},wt={class:"col-12 pa-2 align-ic"},kt={class:"px-2"},xt={class:"col-12 _px-2 align-ic"},Ct=j({__name:"cron_scheduler",setup(x){const a=w(null);let r=null;const n=w(!1),u=w(null),d=w(void 0);function l(){n!=!0&&fetch(`${C.value}api/cron/ls`).then(async v=>{if(v.ok){const f=await v.json();a.value=f,n.value=!1}else sys_info.value=[]}).catch(v=>sys_info.value=[])}function i(){n!=!0&&fetch(`${C.value}api/cron/ls/reload`).then(async v=>{if(v.ok){const f=await v.json();a.value=f,n.value=!1}else sys_info.value=[]}).catch(v=>sys_info.value=[])}const h=A(()=>{var v;return((v=y.value)==null?void 0:v.datetime)&&new Date(y.value.datetime).toISOString().slice(8,16).replace("T"," ")});function g(v){a.value.tasks.push([!0,"- * * * *",v[0],v[2],v[1]])}function t(v){const f=prompt("Input schedule format [* * * * *] ",v[1]);f.trim().split(/\s+/).length==5&&(v[1]=f,n.value=!0)}function s(v){const f=prompt("Input params ",JSON.stringify(v[3]));if(f!==null){try{v[3]=JSON.parse(f)}catch{v[3]="params"}n.value=!0}}function b(v){const f=prompt("Input label ",v[4]);f!==null&&(v[4]=f,n.value=!0)}function P(){l()}z(()=>{r=!0,l()}),U(()=>{r=!1});function K(){const v={method:"put",body:JSON.stringify(a.value.tasks)};fetch(`${C.value}api/cron/set`,v).then(async f=>{f.ok&&l()}).catch(f=>{})}F(()=>y.value.err,v=>{!v&&r&&l()});function J(v){if(u.value===null){u.value=v;return}if(u.value==v){u.value=null,d.value=void 0;return}d.value=v,setTimeout(()=>{a.value.tasks.splice(v,0,a.value.tasks.splice(u.value,1)[0]),u.value=null,n.value=!0,d.value=void 0},455)}return(v,f)=>{var q,G,H;return o(),c("div",null,[_(p,{onClick:f[0]||(f[0]=S=>v.$router.go(-1)),label:"<<",class:"mx-2"}),_(p,{onClick:f[1]||(f[1]=S=>{n.value=!1,P()}),label:"refresh"}),_(p,{onClick:f[2]||(f[2]=S=>{n.value=!1,i()}),label:"reload"}),e("div",vt,[e("div",{class:k(["col-4 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])}," UpTime: "+m(~~($(y).uptime/60))+"min ",3),e("div",{class:k(["col-4 col-sm-12 pa-2 justify-cc",{"bg-warn":$(y).err}])}," PLC time: "+m(h.value),3)]),f[6]||(f[6]=e("h3",null,"Cron tab",-1)),e("div",ft,[e("div",pt,m((q=a.value)==null?void 0:q.name),1),e("div",mt,[e("div",ht,[e("div",gt,[f[3]||(f[3]=e("div",{class:"col-12 px-2"}," Cron table: ",-1)),e("div",bt,[(o(!0),c(T,null,O((G=a.value)==null?void 0:G.tasks,(S,D)=>(o(),c("div",{class:k(["_mx-2 d-flex_ tab_wrap",{up:u.value===D&&u.value>d.value,down:u.value===D&&u.value<d.value}])},[_(p,{onClick:E=>J(D),label:u.value===D?"<>":D+".",title:"position",class:k({ch_index:u.value===D})},null,8,["onClick","label","class"]),_(p,{class:k([S[0]?"_bg-positive":"bg-secondary"]),onClick:E=>{S[0]=!S[0],n.value=!0},label:S[0]?"o":"~",_label:"o"},null,8,["class","onClick","label"]),_(p,{onClick:E=>t(S),label:S[1]},null,8,["onClick","label"]),e("span",yt,m(S[2]),1),_(p,{onClick:E=>s(S),label:S[3]},null,8,["onClick","label"]),_(p,{onClick:E=>b(S),label:S[4]},null,8,["onClick","label"]),_(p,{onClick:E=>{a.value.tasks.splice(D,1),n.value=!0},label:"-"},null,8,["onClick"])],2))),256))])]),e("div",$t,[e("div",wt,[f[4]||(f[4]=L(" Command's: ")),e("span",kt,[n.value?(o(),N(p,{key:0,class:"bg-warn",onClick:K,label:"Save"})):M("",!0)])]),(o(!0),c(T,null,O((H=a.value)==null?void 0:H.cmd_list,(S,D)=>(o(),c("div",xt,[L(m(S)+" ",1),_(p,{onClick:E=>{g(S),n.value=!0},label:"+"},null,8,["onClick"])]))),256))])]),f[5]||(f[5]=e("pre",{class:"txt-left pa-md-2_ pa-2",style:{"white-space":"break-spaces"}},`Schedule string: "* * * * *" as position "mm hh dw dd my" where:
mm - minutes,
hh - hours,
dw - day of week (1-mo, 2-tu, ..., 7-su),
dd - day of month,
my - month of year,
format: every position * may be as any number;
 integer number;
 range of number 2-9;
 list 1,2,3;
 number with delimiter (example: */3 for step every third), range with step throw delimiter 4-20/4 every fourth
      `,-1))])])])}}}),St=B(Ct,[["__scopeId","data-v-7d7648e9"]]),At=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),Tt={class:"row pa-2"},jt={class:"row pa-2"},Ot=j({__name:"settings",setup(x){const a=w(null);let r=null;function n(){fetch(`${C}api/status`).then(async l=>{if(l.ok){const i=await l.json();a.value=i}else a.value=[]}).catch(l=>a.value=[])}const u=A(()=>{var l;return((l=y.value)==null?void 0:l.datetime)&&new Date(y.value.datetime).toISOString().slice(8,16).replace("T"," ")});function d(){n()}return z(()=>{r=!0,n()}),U(()=>{r=!1}),F(()=>y.value.err,l=>{!l&&r&&n()}),(l,i)=>(o(),c("div",null,[_(p,{onClick:i[0]||(i[0]=h=>l.$router.go(-1)),label:"<<",class:"mx-2"}),_(p,{onClick:d,label:"refresh"}),i[2]||(i[2]=e("h3",null,"Settings - settings",-1)),e("div",Tt,[e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])}," PLC time: "+m(u.value),3),e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])},"Free mem: "+m(~~($(y).mem_free/100)/10)+"k",3),e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])},"UpTime: "+m(~~($(y).uptime/60))+"min",3),e("div",{class:k(["col-3 col-sm-6 pa-2 justify-cc",{"bg-warn":$(y).err}])},"CPU load: "+m(~~($(y).load*100+1))+"%",3)]),(o(!0),c(T,null,O(a.value,(h,g)=>(o(),c("div",jt,i[1]||(i[1]=[e("div",{class:"col-md-12 _col-4 px-2 _text-b"}," Page in dev mode ",-1)])))),256))]))}}),Ft=Object.freeze(Object.defineProperty({__proto__:null,default:Ot},Symbol.toStringTag,{value:"Module"})),Pt={class:"row px-2"},It={class:"col-6 col-md-12 px-2 _text-b align-ic justify-cc"},Lt=j({__name:"servers_api",setup(x){const a=Z();w(null);const r=w(C),n=w([{name:"main-this '/'",host:"/",state:""},{name:"PLC- reserv .1.108",host:"http://192.168.1.108/",state:""},{name:"PLC-holl-2 .5.115",host:"http://192.168.5.115/",state:""},{name:"PLC-pole-3 .5.166",host:"http://192.168.5.166/",state:""},{name:"PLC-wirpool-4 .1.108",host:"http://192.168.1.108/",state:""}]);let u=null;function d(){a.name=="servers_api"&&(n.value.forEach((i,h)=>{setTimeout(()=>{fetch(`${i.host}ping`).then(async g=>{g.ok&&(await g.text()).search("pong")===0?i.state=!0:i.state=!1}).catch(g=>i.state=!1)},h*300)}),u=setTimeout(d,737*1e3))}z(()=>{clearTimeout(u),d()});function l(i){C.value=i.host,localStorage.setItem("current_host",C.value)}return(i,h)=>(o(),c("div",null,[_(p,{onClick:h[0]||(h[0]=g=>i.$router.go(-1)),label:"<<",class:"mx-2"}),h[1]||(h[1]=e("h3",null,"Servers REST API",-1)),e("h5",null,"current host: "+m(r.value),1),e("div",Pt,[(o(!0),c(T,null,O(n.value,g=>(o(),c("div",It,[_(p,{onClick:t=>l(g),ladge:"",label:(g==null?void 0:g.name)||"switch"},{prepend:I(()=>[e("div",{class:k(["lamp",{on:g.state,off:g.state===!1}]),_label:"switch"},null,2)]),_:2},1032,["onClick","label"])]))),256))])]))}}),Kt=Object.freeze(Object.defineProperty({__proto__:null,default:Lt},Symbol.toStringTag,{value:"Module"}));export{zt as L,B as _,y as a,C as b,Rt as c,At as d,Ft as e,Ut as f,Kt as g,Bt as h,Mt as i,Et as n,Jt as s};
